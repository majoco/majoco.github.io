(function(){const t={type:"change"},n={type:"start"},i={type:"end"};class r extends THREE.EventDispatcher{constructor(r,u){function hi(){return Math.PI/1800*f.autoRotateSpeed}function ut(){return Math.pow(.95,f.zoomSpeed)}function ft(n){c.theta-=n}function lt(n){c.phi-=n}function et(n){f.object.isPerspectiveCamera?tt/=n:f.object.isOrthographicCamera?(f.object.zoom=Math.max(f.minZoom,Math.min(f.maxZoom,f.object.zoom*n)),f.object.updateProjectionMatrix(),it=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),f.enableZoom=!1)}function yt(n){f.object.isPerspectiveCamera?tt*=n:f.object.isOrthographicCamera?(f.object.zoom=Math.max(f.minZoom,Math.min(f.maxZoom,f.object.zoom/n)),f.object.updateProjectionMatrix(),it=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),f.enableZoom=!1)}function pt(n){l.set(n.clientX,n.clientY)}function ci(n){k.set(n.clientX,n.clientY)}function wt(n){v.set(n.clientX,n.clientY)}function li(n){a.set(n.clientX,n.clientY);w.subVectors(a,l).multiplyScalar(f.rotateSpeed);const t=f.domElement;ft(2*Math.PI*w.x/t.clientHeight);lt(2*Math.PI*w.y/t.clientHeight);l.copy(a);f.update()}function ai(n){d.set(n.clientX,n.clientY);nt.subVectors(d,k);nt.y>0?et(ut()):nt.y<0&&yt(ut());k.copy(d);f.update()}function vi(n){y.set(n.clientX,n.clientY);b.subVectors(y,v).multiplyScalar(f.panSpeed);g(b.x,b.y);v.copy(y);f.update()}function yi(n){n.deltaY<0?yt(ut()):n.deltaY>0&&et(ut());f.update()}function pi(n){let t=!1;switch(n.code){case f.keys.UP:g(0,f.keyPanSpeed);t=!0;break;case f.keys.BOTTOM:g(0,-f.keyPanSpeed);t=!0;break;case f.keys.LEFT:g(f.keyPanSpeed,0);t=!0;break;case f.keys.RIGHT:g(-f.keyPanSpeed,0);t=!0}t&&(n.preventDefault(),f.update())}function bt(){if(e.length===1)l.set(e[0].pageX,e[0].pageY);else{const n=.5*(e[0].pageX+e[1].pageX),t=.5*(e[0].pageY+e[1].pageY);l.set(n,t)}}function kt(){if(e.length===1)v.set(e[0].pageX,e[0].pageY);else{const n=.5*(e[0].pageX+e[1].pageX),t=.5*(e[0].pageY+e[1].pageY);v.set(n,t)}}function dt(){const n=e[0].pageX-e[1].pageX,t=e[0].pageY-e[1].pageY,i=Math.sqrt(n*n+t*t);k.set(0,i)}function wi(){f.enableZoom&&dt();f.enablePan&&kt()}function bi(){f.enableZoom&&dt();f.enableRotate&&bt()}function gt(n){if(e.length==1)a.set(n.pageX,n.pageY);else{const t=ht(n),i=.5*(n.pageX+t.x),r=.5*(n.pageY+t.y);a.set(i,r)}w.subVectors(a,l).multiplyScalar(f.rotateSpeed);const t=f.domElement;ft(2*Math.PI*w.x/t.clientHeight);lt(2*Math.PI*w.y/t.clientHeight);l.copy(a)}function ni(n){if(e.length===1)y.set(n.pageX,n.pageY);else{const t=ht(n),i=.5*(n.pageX+t.x),r=.5*(n.pageY+t.y);y.set(i,r)}b.subVectors(y,v).multiplyScalar(f.panSpeed);g(b.x,b.y);v.copy(y)}function ti(n){const t=ht(n),i=n.pageX-t.x,r=n.pageY-t.y,u=Math.sqrt(i*i+r*r);d.set(0,u);nt.set(0,Math.pow(d.y/k.y,f.zoomSpeed));et(nt.y);k.copy(d)}function ki(n){f.enableZoom&&ti(n);f.enablePan&&ni(n)}function di(n){f.enableZoom&&ti(n);f.enableRotate&&gt(n)}function ii(n){f.enabled!==!1&&(e.length===0&&(f.domElement.setPointerCapture(n.pointerId),f.domElement.addEventListener("pointermove",ot),f.domElement.addEventListener("pointerup",st)),rr(n),n.pointerType==="touch"?tr(n):gi(n))}function ot(n){f.enabled!==!1&&(n.pointerType==="touch"?ir(n):nr(n))}function st(n){oi(n);e.length===0&&(f.domElement.releasePointerCapture(n.pointerId),f.domElement.removeEventListener("pointermove",ot),f.domElement.removeEventListener("pointerup",st));f.dispatchEvent(i);s=o.NONE}function ri(n){oi(n)}function gi(t){let i;switch(t.button){case 0:i=f.mouseButtons.LEFT;break;case 1:i=f.mouseButtons.MIDDLE;break;case 2:i=f.mouseButtons.RIGHT;break;default:i=-1}switch(i){case THREE.MOUSE.DOLLY:if(f.enableZoom===!1)return;ci(t);s=o.DOLLY;break;case THREE.MOUSE.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(f.enablePan===!1)return;wt(t);s=o.PAN}else{if(f.enableRotate===!1)return;pt(t);s=o.ROTATE}break;case THREE.MOUSE.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(f.enableRotate===!1)return;pt(t);s=o.ROTATE}else{if(f.enablePan===!1)return;wt(t);s=o.PAN}break;default:s=o.NONE}s!==o.NONE&&f.dispatchEvent(n)}function nr(n){if(f.enabled!==!1)switch(s){case o.ROTATE:if(f.enableRotate===!1)return;li(n);break;case o.DOLLY:if(f.enableZoom===!1)return;ai(n);break;case o.PAN:if(f.enablePan===!1)return;vi(n)}}function ui(t){f.enabled!==!1&&f.enableZoom!==!1&&s===o.NONE&&(t.preventDefault(),f.dispatchEvent(n),yi(t),f.dispatchEvent(i))}function fi(n){f.enabled!==!1&&f.enablePan!==!1&&pi(n)}function tr(t){si(t);switch(e.length){case 1:switch(f.touches.ONE){case THREE.TOUCH.ROTATE:if(f.enableRotate===!1)return;bt();s=o.TOUCH_ROTATE;break;case THREE.TOUCH.PAN:if(f.enablePan===!1)return;kt();s=o.TOUCH_PAN;break;default:s=o.NONE}break;case 2:switch(f.touches.TWO){case THREE.TOUCH.DOLLY_PAN:if(f.enableZoom===!1&&f.enablePan===!1)return;wi();s=o.TOUCH_DOLLY_PAN;break;case THREE.TOUCH.DOLLY_ROTATE:if(f.enableZoom===!1&&f.enableRotate===!1)return;bi();s=o.TOUCH_DOLLY_ROTATE;break;default:s=o.NONE}break;default:s=o.NONE}s!==o.NONE&&f.dispatchEvent(n)}function ir(n){si(n);switch(s){case o.TOUCH_ROTATE:if(f.enableRotate===!1)return;gt(n);f.update();break;case o.TOUCH_PAN:if(f.enablePan===!1)return;ni(n);f.update();break;case o.TOUCH_DOLLY_PAN:if(f.enableZoom===!1&&f.enablePan===!1)return;ki(n);f.update();break;case o.TOUCH_DOLLY_ROTATE:if(f.enableZoom===!1&&f.enableRotate===!1)return;di(n);f.update();break;default:s=o.NONE}}function ei(n){f.enabled!==!1&&n.preventDefault()}function rr(n){e.push(n)}function oi(n){delete rt[n.pointerId];for(let t=0;t<e.length;t++)if(e[t].pointerId==n.pointerId){e.splice(t,1);return}}function si(n){let t=rt[n.pointerId];t===undefined&&(t=new THREE.Vector2,rt[n.pointerId]=t);t.set(n.pageX,n.pageY)}function ht(n){const t=n.pointerId===e[0].pointerId?e[1]:e[0];return rt[t.pointerId]}super();u===undefined&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.');u===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');this.object=r;this.domElement=u;this.domElement.style.touchAction="none";this.enabled=!0;this.target=new THREE.Vector3;this.minDistance=0;this.maxDistance=Infinity;this.minZoom=0;this.maxZoom=Infinity;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.minAzimuthAngle=- Infinity;this.maxAzimuthAngle=Infinity;this.enableDamping=!1;this.dampingFactor=.05;this.enableZoom=!0;this.zoomSpeed=1;this.enableRotate=!0;this.rotateSpeed=1;this.enablePan=!0;this.panSpeed=1;this.screenSpacePanning=!0;this.keyPanSpeed=7;this.autoRotate=!1;this.autoRotateSpeed=2;this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"};this.mouseButtons={LEFT:THREE.MOUSE.ROTATE,MIDDLE:THREE.MOUSE.DOLLY,RIGHT:THREE.MOUSE.PAN};this.touches={ONE:THREE.TOUCH.ROTATE,TWO:THREE.TOUCH.DOLLY_PAN};this.target0=this.target.clone();this.position0=this.object.position.clone();this.zoom0=this.object.zoom;this._domElementKeyEvents=null;this.getPolarAngle=function(){return h.phi};this.getAzimuthalAngle=function(){return h.theta};this.getDistance=function(){return this.object.position.distanceTo(this.target)};this.listenToKeyEvents=function(n){n.addEventListener("keydown",fi);this._domElementKeyEvents=n};this.saveState=function(){f.target0.copy(f.target);f.position0.copy(f.object.position);f.zoom0=f.object.zoom};this.reset=function(){f.target.copy(f.target0);f.object.position.copy(f.position0);f.object.zoom=f.zoom0;f.object.updateProjectionMatrix();f.dispatchEvent(t);f.update();s=o.NONE};this.update=function(){const n=new THREE.Vector3,u=(new THREE.Quaternion).setFromUnitVectors(r.up,new THREE.Vector3(0,1,0)),a=u.clone().invert(),e=new THREE.Vector3,l=new THREE.Quaternion,i=2*Math.PI;return function(){const y=f.object.position;n.copy(y).sub(f.target);n.applyQuaternion(u);h.setFromVector3(n);f.autoRotate&&s===o.NONE&&ft(hi());f.enableDamping?(h.theta+=c.theta*f.dampingFactor,h.phi+=c.phi*f.dampingFactor):(h.theta+=c.theta,h.phi+=c.phi);let r=f.minAzimuthAngle,v=f.maxAzimuthAngle;return(isFinite(r)&&isFinite(v)&&(r<-Math.PI?r+=i:r>Math.PI&&(r-=i),v<-Math.PI?v+=i:v>Math.PI&&(v-=i),h.theta=r<=v?Math.max(r,Math.min(v,h.theta)):h.theta>(r+v)/2?Math.max(r,h.theta):Math.min(v,h.theta)),h.phi=Math.max(f.minPolarAngle,Math.min(f.maxPolarAngle,h.phi)),h.makeSafe(),h.radius*=tt,h.radius=Math.max(f.minDistance,Math.min(f.maxDistance,h.radius)),f.enableDamping===!0?f.target.addScaledVector(p,f.dampingFactor):f.target.add(p),n.setFromSpherical(h),n.applyQuaternion(a),y.copy(f.target).add(n),f.object.lookAt(f.target),f.enableDamping===!0?(c.theta*=1-f.dampingFactor,c.phi*=1-f.dampingFactor,p.multiplyScalar(1-f.dampingFactor)):(c.set(0,0,0),p.set(0,0,0)),tt=1,it||e.distanceToSquared(f.object.position)>ct||8*(1-l.dot(f.object.quaternion))>ct)?(f.dispatchEvent(t),e.copy(f.object.position),l.copy(f.object.quaternion),it=!1,!0):!1}}();this.dispose=function(){f.domElement.removeEventListener("contextmenu",ei);f.domElement.removeEventListener("pointerdown",ii);f.domElement.removeEventListener("pointercancel",ri);f.domElement.removeEventListener("wheel",ui);f.domElement.removeEventListener("pointermove",ot);f.domElement.removeEventListener("pointerup",st);f._domElementKeyEvents!==null&&f._domElementKeyEvents.removeEventListener("keydown",fi)};const f=this,o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=o.NONE;const ct=1e-6,h=new THREE.Spherical,c=new THREE.Spherical;let tt=1;const p=new THREE.Vector3;let it=!1;const l=new THREE.Vector2,a=new THREE.Vector2,w=new THREE.Vector2,v=new THREE.Vector2,y=new THREE.Vector2,b=new THREE.Vector2,k=new THREE.Vector2,d=new THREE.Vector2,nt=new THREE.Vector2,e=[],rt={};const at=function(){const n=new THREE.Vector3;return function(t,i){n.setFromMatrixColumn(i,0);n.multiplyScalar(-t);p.add(n)}}(),vt=function(){const n=new THREE.Vector3;return function(t,i){f.screenSpacePanning===!0?n.setFromMatrixColumn(i,1):(n.setFromMatrixColumn(i,0),n.crossVectors(f.object.up,n));n.multiplyScalar(t);p.add(n)}}(),g=function(){const n=new THREE.Vector3;return function(t,i){const r=f.domElement;if(f.object.isPerspectiveCamera){const e=f.object.position;n.copy(e).sub(f.target);let u=n.length();u*=Math.tan(f.object.fov/2*Math.PI/180);at(2*t*u/r.clientHeight,f.object.matrix);vt(2*i*u/r.clientHeight,f.object.matrix)}else f.object.isOrthographicCamera?(at(t*(f.object.right-f.object.left)/f.object.zoom/r.clientWidth,f.object.matrix),vt(i*(f.object.top-f.object.bottom)/f.object.zoom/r.clientHeight,f.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),f.enablePan=!1)}}();f.domElement.addEventListener("contextmenu",ei);f.domElement.addEventListener("pointerdown",ii);f.domElement.addEventListener("pointercancel",ri);f.domElement.addEventListener("wheel",ui,{passive:!1});this.update()}}class u extends r{constructor(n,t){super(n,t);this.screenSpacePanning=!1;this.mouseButtons.LEFT=THREE.MOUSE.PAN;this.mouseButtons.RIGHT=THREE.MOUSE.ROTATE;this.touches.ONE=THREE.TOUCH.PAN;this.touches.TWO=THREE.TOUCH.DOLLY_ROTATE}}THREE.MapControls=u;THREE.OrbitControls=r})(),function(){const t={type:"change"},n={type:"start"},i={type:"end"};class r extends THREE.EventDispatcher{constructor(r,u){function hi(){return Math.PI/1800*f.autoRotateSpeed}function ut(){return Math.pow(.95,f.zoomSpeed)}function ft(n){c.theta-=n}function lt(n){c.phi-=n}function et(n){f.object.isPerspectiveCamera?tt/=n:f.object.isOrthographicCamera?(f.object.zoom=Math.max(f.minZoom,Math.min(f.maxZoom,f.object.zoom*n)),f.object.updateProjectionMatrix(),it=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),f.enableZoom=!1)}function yt(n){f.object.isPerspectiveCamera?tt*=n:f.object.isOrthographicCamera?(f.object.zoom=Math.max(f.minZoom,Math.min(f.maxZoom,f.object.zoom/n)),f.object.updateProjectionMatrix(),it=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),f.enableZoom=!1)}function pt(n){l.set(n.clientX,n.clientY)}function ci(n){k.set(n.clientX,n.clientY)}function wt(n){v.set(n.clientX,n.clientY)}function li(n){a.set(n.clientX,n.clientY);w.subVectors(a,l).multiplyScalar(f.rotateSpeed);const t=f.domElement;ft(2*Math.PI*w.x/t.clientHeight);lt(2*Math.PI*w.y/t.clientHeight);l.copy(a);f.update()}function ai(n){d.set(n.clientX,n.clientY);nt.subVectors(d,k);nt.y>0?et(ut()):nt.y<0&&yt(ut());k.copy(d);f.update()}function vi(n){y.set(n.clientX,n.clientY);b.subVectors(y,v).multiplyScalar(f.panSpeed);g(b.x,b.y);v.copy(y);f.update()}function yi(n){n.deltaY<0?yt(ut()):n.deltaY>0&&et(ut());f.update()}function pi(n){let t=!1;switch(n.code){case f.keys.UP:g(0,f.keyPanSpeed);t=!0;break;case f.keys.BOTTOM:g(0,-f.keyPanSpeed);t=!0;break;case f.keys.LEFT:g(f.keyPanSpeed,0);t=!0;break;case f.keys.RIGHT:g(-f.keyPanSpeed,0);t=!0}t&&(n.preventDefault(),f.update())}function bt(){if(e.length===1)l.set(e[0].pageX,e[0].pageY);else{const n=.5*(e[0].pageX+e[1].pageX),t=.5*(e[0].pageY+e[1].pageY);l.set(n,t)}}function kt(){if(e.length===1)v.set(e[0].pageX,e[0].pageY);else{const n=.5*(e[0].pageX+e[1].pageX),t=.5*(e[0].pageY+e[1].pageY);v.set(n,t)}}function dt(){const n=e[0].pageX-e[1].pageX,t=e[0].pageY-e[1].pageY,i=Math.sqrt(n*n+t*t);k.set(0,i)}function wi(){f.enableZoom&&dt();f.enablePan&&kt()}function bi(){f.enableZoom&&dt();f.enableRotate&&bt()}function gt(n){if(e.length==1)a.set(n.pageX,n.pageY);else{const t=ht(n),i=.5*(n.pageX+t.x),r=.5*(n.pageY+t.y);a.set(i,r)}w.subVectors(a,l).multiplyScalar(f.rotateSpeed);const t=f.domElement;ft(2*Math.PI*w.x/t.clientHeight);lt(2*Math.PI*w.y/t.clientHeight);l.copy(a)}function ni(n){if(e.length===1)y.set(n.pageX,n.pageY);else{const t=ht(n),i=.5*(n.pageX+t.x),r=.5*(n.pageY+t.y);y.set(i,r)}b.subVectors(y,v).multiplyScalar(f.panSpeed);g(b.x,b.y);v.copy(y)}function ti(n){const t=ht(n),i=n.pageX-t.x,r=n.pageY-t.y,u=Math.sqrt(i*i+r*r);d.set(0,u);nt.set(0,Math.pow(d.y/k.y,f.zoomSpeed));et(nt.y);k.copy(d)}function ki(n){f.enableZoom&&ti(n);f.enablePan&&ni(n)}function di(n){f.enableZoom&&ti(n);f.enableRotate&&gt(n)}function ii(n){f.enabled!==!1&&(e.length===0&&(f.domElement.setPointerCapture(n.pointerId),f.domElement.addEventListener("pointermove",ot),f.domElement.addEventListener("pointerup",st)),rr(n),n.pointerType==="touch"?tr(n):gi(n))}function ot(n){f.enabled!==!1&&(n.pointerType==="touch"?ir(n):nr(n))}function st(n){oi(n);e.length===0&&(f.domElement.releasePointerCapture(n.pointerId),f.domElement.removeEventListener("pointermove",ot),f.domElement.removeEventListener("pointerup",st));f.dispatchEvent(i);s=o.NONE}function ri(n){oi(n)}function gi(t){let i;switch(t.button){case 0:i=f.mouseButtons.LEFT;break;case 1:i=f.mouseButtons.MIDDLE;break;case 2:i=f.mouseButtons.RIGHT;break;default:i=-1}switch(i){case THREE.MOUSE.DOLLY:if(f.enableZoom===!1)return;ci(t);s=o.DOLLY;break;case THREE.MOUSE.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(f.enablePan===!1)return;wt(t);s=o.PAN}else{if(f.enableRotate===!1)return;pt(t);s=o.ROTATE}break;case THREE.MOUSE.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(f.enableRotate===!1)return;pt(t);s=o.ROTATE}else{if(f.enablePan===!1)return;wt(t);s=o.PAN}break;default:s=o.NONE}s!==o.NONE&&f.dispatchEvent(n)}function nr(n){if(f.enabled!==!1)switch(s){case o.ROTATE:if(f.enableRotate===!1)return;li(n);break;case o.DOLLY:if(f.enableZoom===!1)return;ai(n);break;case o.PAN:if(f.enablePan===!1)return;vi(n)}}function ui(t){f.enabled!==!1&&f.enableZoom!==!1&&s===o.NONE&&(t.preventDefault(),f.dispatchEvent(n),yi(t),f.dispatchEvent(i))}function fi(n){f.enabled!==!1&&f.enablePan!==!1&&pi(n)}function tr(t){si(t);switch(e.length){case 1:switch(f.touches.ONE){case THREE.TOUCH.ROTATE:if(f.enableRotate===!1)return;bt();s=o.TOUCH_ROTATE;break;case THREE.TOUCH.PAN:if(f.enablePan===!1)return;kt();s=o.TOUCH_PAN;break;default:s=o.NONE}break;case 2:switch(f.touches.TWO){case THREE.TOUCH.DOLLY_PAN:if(f.enableZoom===!1&&f.enablePan===!1)return;wi();s=o.TOUCH_DOLLY_PAN;break;case THREE.TOUCH.DOLLY_ROTATE:if(f.enableZoom===!1&&f.enableRotate===!1)return;bi();s=o.TOUCH_DOLLY_ROTATE;break;default:s=o.NONE}break;default:s=o.NONE}s!==o.NONE&&f.dispatchEvent(n)}function ir(n){si(n);switch(s){case o.TOUCH_ROTATE:if(f.enableRotate===!1)return;gt(n);f.update();break;case o.TOUCH_PAN:if(f.enablePan===!1)return;ni(n);f.update();break;case o.TOUCH_DOLLY_PAN:if(f.enableZoom===!1&&f.enablePan===!1)return;ki(n);f.update();break;case o.TOUCH_DOLLY_ROTATE:if(f.enableZoom===!1&&f.enableRotate===!1)return;di(n);f.update();break;default:s=o.NONE}}function ei(n){f.enabled!==!1&&n.preventDefault()}function rr(n){e.push(n)}function oi(n){delete rt[n.pointerId];for(let t=0;t<e.length;t++)if(e[t].pointerId==n.pointerId){e.splice(t,1);return}}function si(n){let t=rt[n.pointerId];t===undefined&&(t=new THREE.Vector2,rt[n.pointerId]=t);t.set(n.pageX,n.pageY)}function ht(n){const t=n.pointerId===e[0].pointerId?e[1]:e[0];return rt[t.pointerId]}super();u===undefined&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.');u===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');this.object=r;this.domElement=u;this.domElement.style.touchAction="none";this.enabled=!0;this.target=new THREE.Vector3;this.minDistance=0;this.maxDistance=Infinity;this.minZoom=0;this.maxZoom=Infinity;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.minAzimuthAngle=- Infinity;this.maxAzimuthAngle=Infinity;this.enableDamping=!1;this.dampingFactor=.05;this.enableZoom=!0;this.zoomSpeed=1;this.enableRotate=!0;this.rotateSpeed=1;this.enablePan=!0;this.panSpeed=1;this.screenSpacePanning=!0;this.keyPanSpeed=7;this.autoRotate=!1;this.autoRotateSpeed=2;this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"};this.mouseButtons={LEFT:THREE.MOUSE.ROTATE,MIDDLE:THREE.MOUSE.DOLLY,RIGHT:THREE.MOUSE.PAN};this.touches={ONE:THREE.TOUCH.ROTATE,TWO:THREE.TOUCH.DOLLY_PAN};this.target0=this.target.clone();this.position0=this.object.position.clone();this.zoom0=this.object.zoom;this._domElementKeyEvents=null;this.getPolarAngle=function(){return h.phi};this.getAzimuthalAngle=function(){return h.theta};this.getDistance=function(){return this.object.position.distanceTo(this.target)};this.listenToKeyEvents=function(n){n.addEventListener("keydown",fi);this._domElementKeyEvents=n};this.saveState=function(){f.target0.copy(f.target);f.position0.copy(f.object.position);f.zoom0=f.object.zoom};this.reset=function(){f.target.copy(f.target0);f.object.position.copy(f.position0);f.object.zoom=f.zoom0;f.object.updateProjectionMatrix();f.dispatchEvent(t);f.update();s=o.NONE};this.update=function(){const n=new THREE.Vector3,u=(new THREE.Quaternion).setFromUnitVectors(r.up,new THREE.Vector3(0,1,0)),a=u.clone().invert(),e=new THREE.Vector3,l=new THREE.Quaternion,i=2*Math.PI;return function(){const y=f.object.position;n.copy(y).sub(f.target);n.applyQuaternion(u);h.setFromVector3(n);f.autoRotate&&s===o.NONE&&ft(hi());f.enableDamping?(h.theta+=c.theta*f.dampingFactor,h.phi+=c.phi*f.dampingFactor):(h.theta+=c.theta,h.phi+=c.phi);let r=f.minAzimuthAngle,v=f.maxAzimuthAngle;return(isFinite(r)&&isFinite(v)&&(r<-Math.PI?r+=i:r>Math.PI&&(r-=i),v<-Math.PI?v+=i:v>Math.PI&&(v-=i),h.theta=r<=v?Math.max(r,Math.min(v,h.theta)):h.theta>(r+v)/2?Math.max(r,h.theta):Math.min(v,h.theta)),h.phi=Math.max(f.minPolarAngle,Math.min(f.maxPolarAngle,h.phi)),h.makeSafe(),h.radius*=tt,h.radius=Math.max(f.minDistance,Math.min(f.maxDistance,h.radius)),f.enableDamping===!0?f.target.addScaledVector(p,f.dampingFactor):f.target.add(p),n.setFromSpherical(h),n.applyQuaternion(a),y.copy(f.target).add(n),f.object.lookAt(f.target),f.enableDamping===!0?(c.theta*=1-f.dampingFactor,c.phi*=1-f.dampingFactor,p.multiplyScalar(1-f.dampingFactor)):(c.set(0,0,0),p.set(0,0,0)),tt=1,it||e.distanceToSquared(f.object.position)>ct||8*(1-l.dot(f.object.quaternion))>ct)?(f.dispatchEvent(t),e.copy(f.object.position),l.copy(f.object.quaternion),it=!1,!0):!1}}();this.dispose=function(){f.domElement.removeEventListener("contextmenu",ei);f.domElement.removeEventListener("pointerdown",ii);f.domElement.removeEventListener("pointercancel",ri);f.domElement.removeEventListener("wheel",ui);f.domElement.removeEventListener("pointermove",ot);f.domElement.removeEventListener("pointerup",st);f._domElementKeyEvents!==null&&f._domElementKeyEvents.removeEventListener("keydown",fi)};const f=this,o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=o.NONE;const ct=1e-6,h=new THREE.Spherical,c=new THREE.Spherical;let tt=1;const p=new THREE.Vector3;let it=!1;const l=new THREE.Vector2,a=new THREE.Vector2,w=new THREE.Vector2,v=new THREE.Vector2,y=new THREE.Vector2,b=new THREE.Vector2,k=new THREE.Vector2,d=new THREE.Vector2,nt=new THREE.Vector2,e=[],rt={};const at=function(){const n=new THREE.Vector3;return function(t,i){n.setFromMatrixColumn(i,0);n.multiplyScalar(-t);p.add(n)}}(),vt=function(){const n=new THREE.Vector3;return function(t,i){f.screenSpacePanning===!0?n.setFromMatrixColumn(i,1):(n.setFromMatrixColumn(i,0),n.crossVectors(f.object.up,n));n.multiplyScalar(t);p.add(n)}}(),g=function(){const n=new THREE.Vector3;return function(t,i){const r=f.domElement;if(f.object.isPerspectiveCamera){const e=f.object.position;n.copy(e).sub(f.target);let u=n.length();u*=Math.tan(f.object.fov/2*Math.PI/180);at(2*t*u/r.clientHeight,f.object.matrix);vt(2*i*u/r.clientHeight,f.object.matrix)}else f.object.isOrthographicCamera?(at(t*(f.object.right-f.object.left)/f.object.zoom/r.clientWidth,f.object.matrix),vt(i*(f.object.top-f.object.bottom)/f.object.zoom/r.clientHeight,f.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),f.enablePan=!1)}}();f.domElement.addEventListener("contextmenu",ei);f.domElement.addEventListener("pointerdown",ii);f.domElement.addEventListener("pointercancel",ri);f.domElement.addEventListener("wheel",ui,{passive:!1});this.update()}}class u extends r{constructor(n,t){super(n,t);this.screenSpacePanning=!1;this.mouseButtons.LEFT=THREE.MOUSE.PAN;this.mouseButtons.RIGHT=THREE.MOUSE.ROTATE;this.touches.ONE=THREE.TOUCH.PAN;this.touches.TWO=THREE.TOUCH.DOLLY_ROTATE}}THREE.MapControls=u;THREE.OrbitControls=r}();